{"version":3,"sources":["App.ts"],"names":[],"mappings":"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","file":"../App.js","sourcesContent":["import { postJSON, getParams, getJSON } from \"./lib/query\";\r\nimport { PlayList } from \"./modules/PlayList\";\r\nimport { AudioPlayer } from \"./modules/AudioPlayer\";\r\nimport { Api } from \"./modules/Api\";\r\nimport { settings } from \"./settings\";\r\n// const settings = {\r\n//     // _client_id: \"cf25482b\",\r\n//     _client_id: \"cf25482b\",\r\n//     _api_key: \"4797f3a80bd19061a2d6e4ffc7f89856b040a81a\",\r\n//     _secret: \"6b8f1bb64f106a4f520b3bf98717e06e\",\r\n//     _api_base: \"https://api.jamendo.com/v3.0/\",\r\n//     _code: \"4fc6741c3be9f6fb9c13c9be0e8c2f9889e98396\",\r\n// };\r\n// let access_token: any = null;\r\n\r\nlet token_info: any = {};\r\n\r\nasync function getCurentUserInfo(access_token: string) {\r\n    return new Promise((resolve, reject) => {\r\n        const url =\r\n            \"https://api.jamendo.com/v3.0/users/?client_id=cf25482b&format=jsonpretty&access_token=\" + access_token;\r\n        getJSON(url).then((data: any) => {\r\n            if (data.headers.status === \"success\") {\r\n                resolve({ result: true, user: data.results[0] });\r\n            } else {\r\n                resolve({ result: false, message: data });\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getDataFromApi(url: string) {\r\n    return new Promise((resolve, reject) => {\r\n        getJSON(url).then((data: any) => {\r\n            if (data.headers.status === \"success\") {\r\n                resolve({ result: true, data: data.results });\r\n            } else {\r\n                resolve({ result: false, message: data });\r\n            }\r\n        });\r\n    });\r\n}\r\nconst url_params = getParams(window.location);\r\n\r\nfunction getTemplateForUserInfo(user_info: any) {\r\n    return `\r\n        <div class=\"user-info\">\r\n            <img src=\"${user_info.image}\"alt=\"image_profile\">\r\n            <span>${user_info.dispname}</span>\r\n        </div>\r\n    `;\r\n}\r\nclass MainPage {\r\n    user_info_dom: any;\r\n    albums_content: any;\r\n    api: any;\r\n    player: any;\r\n    registration__link: any;\r\n    settings: any;\r\n    constructor(conf: any) {\r\n        this.user_info_dom = conf.user_info_dom;\r\n        this.albums_content = conf.albums_content;\r\n        this.registration__link = conf.registration__link;\r\n        this.api = conf.api;\r\n        this.player = conf.player;\r\n        this.settings = conf.settings;\r\n    }\r\n    playMusic = (ev: any) => {\r\n        ev.preventDefault();\r\n\r\n        const song_data = JSON.parse(ev.target.getAttribute(\"data-info-music\"));\r\n        this.player.play(song_data);\r\n    };\r\n    async init() {\r\n        // вход\r\n\r\n        this.registration__link.setAttribute(\r\n            \"href\",\r\n            `https://api.jamendo.com/v3.0/oauth/authorize?client_id=${this.settings.client_id}&redirect_uri=http://localhost:4567/&response_type=code`\r\n        );\r\n        if (this.albums_content) {\r\n            // fuzzytags - выбор по тегам\r\n            let url, playlist;\r\n\r\n            // новинки\r\n            url = `https://api.jamendo.com/v3.0/playlists/?client_id=${this.settings.client_id}&format=jsonpretty&limit=12&datebetween=2022-01-02_2022-04-01&hasimage=1`;\r\n            const albums: any = await getDataFromApi(url);\r\n            // console.log(\"albums\", albums);\r\n            playlist = new PlayList({ list: albums.data, title: \"Плейлисты\", type: \"playlist\", url: url });\r\n            this.albums_content.insertAdjacentHTML(\"beforeend\", playlist.render());\r\n\r\n            /// afhnbcns\r\n            const url_artist = `https://api.jamendo.com/v3.0/artists/?client_id=${this.settings.client_id}&format=jsonpretty&limit=12&imagesize=100`;\r\n            const albums_artist: any = await getDataFromApi(url_artist);\r\n\r\n            playlist = new PlayList({\r\n                list: albums_artist.data,\r\n                title: \"Исполнители\",\r\n                type: \"artist\",\r\n                url: url_artist,\r\n            });\r\n            this.albums_content.insertAdjacentHTML(\"beforeend\", playlist.render());\r\n            // по жанрам\r\n            const url_jenre = `https://api.jamendo.com/v3.0/playlists/?client_id=${this.settings.client_id}&format=jsonpretty&limit=12`;\r\n            const albums_jenre: any = await getDataFromApi(url_jenre);\r\n\r\n            playlist = new PlayList({ list: albums_jenre.data, title: \"Жанры\", type: \"playlist\", url: url_jenre });\r\n            this.albums_content.insertAdjacentHTML(\"beforeend\", playlist.render());\r\n            // артисты\r\n\r\n            const url_top = `https://api.jamendo.com/v3.0/tracks/?client_id=${this.settings.client_id}&format=jsonpretty&limit=12&include=musicinfo&boost=listens_week&imagesize=100`;\r\n            const track_top: any = await getDataFromApi(url_top);\r\n\r\n            playlist = new PlayList({ list: track_top.data, title: \"Новинки недели\", type: \"track\", url: url_top });\r\n            this.albums_content.insertAdjacentHTML(\"beforeend\", playlist.render());\r\n            // топ треков\r\n            // url = `https://api.jamendo.com/v3.0/albums/?client_id=${this.settings.client_id}&format=jsonpretty&limit=12&order=popularity_total&datebetween=2021-01-02_2022-05-01&lang=en&hasscore=2&access_token=${token_info.access_token}`;\r\n            // const popularity_total: any = await getDataFromApi(url);\r\n\r\n            // if (popularity_total.result) {\r\n            //     playlist = new PlayList({\r\n            //         list: popularity_total.data,\r\n            //         title: \"Популярное\",\r\n            //         type: \"album\",\r\n            //         url: url,\r\n            //     });\r\n            //     this.albums_content.insertAdjacentHTML(\"beforeend\", playlist.render());\r\n            // }\r\n        }\r\n\r\n        const plays_btn: any = document.getElementsByClassName(\"play-btn\");\r\n        if (plays_btn) {\r\n            for (var i = 0; i < plays_btn.length; i++) {\r\n                plays_btn[i].addEventListener(\"click\", this.playMusic);\r\n            }\r\n        }\r\n    }\r\n    async start() {\r\n        this.init();\r\n    }\r\n}\r\n\r\nconst user_info_dom = document.getElementById(\"user-info\");\r\nconst albums_content = document.getElementById(\"albums-content\");\r\nconst audio_player = document.getElementById(\"audio-player\");\r\nconst song_info_player = document.getElementById(\"song-info-player\");\r\n\r\nconst play_pause = document.getElementById(\"play-pause\");\r\nconst play_back = document.getElementById(\"play-back\");\r\nconst play_forward = document.getElementById(\"play-forward\");\r\nconst play_progress = document.getElementById(\"play-progress\");\r\nconst play_sound_mute = document.getElementById(\"play-sound-mute\");\r\nconst play_volume = document.getElementById(\"play-volume\");\r\nconst time_start = document.getElementById(\"play-time-start\");\r\nconst time_end = document.getElementById(\"play-time-end\");\r\nconst play_svg_path = document.getElementById(\"play_svg_path\");\r\nconst registration__link: any = document.getElementById(\"registration__link\");\r\nif (url_params.code && !token_info.access_token && !localStorage.getItem(\"access_token\")) {\r\n    // https://pixel-space.herokuapp.com/?module=registration&action=Enter\r\n\r\n    postJSON(\"/\", {\r\n        code: url_params.code,\r\n    }).then(async (answer: any) => {\r\n        token_info = JSON.parse(answer.access_token);\r\n\r\n        if (token_info.error) {\r\n            alert(\"ERROR =>\" + token_info.error_description);\r\n        } else {\r\n            registration__link.style.display = \"none\";\r\n            localStorage.setItem(\"access_token\", token_info.access_token);\r\n            localStorage.setItem(\"time_set_access_token\", new Date().getTime().toString());\r\n            const user_info: any = await getCurentUserInfo(token_info.access_token);\r\n\r\n            if (user_info_dom && user_info.result) {\r\n                localStorage.setItem(\"id_user\", user_info.user.id);\r\n                const user_info_content = getTemplateForUserInfo(user_info.user);\r\n                user_info_dom.insertAdjacentHTML(\"beforeend\", user_info_content);\r\n            }\r\n        }\r\n    });\r\n} else {\r\n    if (localStorage.getItem(\"access_token\")) {\r\n        const time_set_access_token = Number(localStorage.getItem(\"time_set_access_token\"));\r\n        const date_set_token: any = new Date(time_set_access_token);\r\n        const curent_date: any = new Date();\r\n        if (curent_date - date_set_token > 5000000) {\r\n            localStorage.removeItem(\"time_set_access_token\");\r\n            localStorage.removeItem(\"access_token\");\r\n        } else {\r\n            token_info = { access_token: localStorage.getItem(\"access_token\") };\r\n            getCurentUserInfo(token_info.access_token).then((user_info: any) => {\r\n                localStorage.setItem(\"id_user\", user_info.user.id);\r\n                registration__link.style.display = \"none\";\r\n                if (user_info_dom) {\r\n                    const user_info_content = getTemplateForUserInfo(user_info.user);\r\n                    user_info_dom.insertAdjacentHTML(\"beforeend\", user_info_content);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nconst Api_object = new Api();\r\nconst player = new AudioPlayer({\r\n    audio_player: audio_player,\r\n    api: Api_object,\r\n    settings: settings,\r\n    song_info_player: song_info_player,\r\n    play_pause: play_pause,\r\n    play_back: play_back,\r\n    play_forward: play_forward,\r\n    play_progress: play_progress,\r\n    play_volume: play_volume,\r\n    play_sound_mute: play_sound_mute,\r\n    time_start: time_start,\r\n    time_end: time_end,\r\n    play_svg_path: play_svg_path,\r\n});\r\nconst main = new MainPage({\r\n    user_info_dom: user_info_dom,\r\n    albums_content: albums_content,\r\n    api: Api_object,\r\n    player: player,\r\n    settings: settings,\r\n    song_info_player: song_info_player,\r\n    registration__link: registration__link,\r\n});\r\nmain.start();\r\n"]}